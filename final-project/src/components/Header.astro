---
import { Image } from "astro:assets";
import raiLogo from "../assets/rai-logo.svg";
import hamburgerIcon from "../assets/rai-humberger.svg";
import facebookIcon from "../assets/rai-facebook.svg";
import instagramIcon from "../assets/rai-insta.svg";
import linkedinIcon from "../assets/rai-linkedin.svg";
import xIcon from "../assets/rai-x.svg";

const navLinks = [
  { label: "Home", href: "/" },
  { label: "About", href: "/about" },
  { label: "Services", href: "/services" },
  { label: "Teams", href: "/teams" },
  { label: "Contact", href: "/contact" },
];
---

<header class="header">
  <!-- Top Bar (Desktop Only) -->
  <div class="top-bar-wrapper">
    <div class="container">
      <div class="top-bar">
        <div class="contact-info">
          <span class="emergency"
            >For emergency cases: <strong>567 123 45 67</strong></span
          >
          <span class="divider">|</span>
          <span>Location: 121 Wallstreet Street, NY, USA</span>
          <span class="divider">|</span>
          <span>Open hours: 9.00-24.00 Mon-Sat</span>
          <span class="divider">|</span>
          <span>Email: info@ddsgnr.com</span>
        </div>

        <div class="social-icons">
          <a href="#" aria-label="Facebook">
            <Image src={facebookIcon} alt="Facebook" class="social-icon" />
          </a>
          <a href="#" aria-label="Instagram">
            <Image src={instagramIcon} alt="Instagram" class="social-icon" />
          </a>
          <a href="#" aria-label="Twitter">
            <Image src={xIcon} alt="Twitter/X" class="social-icon" />
          </a>
          <a href="#" aria-label="LinkedIn">
            <Image src={linkedinIcon} alt="LinkedIn" class="social-icon" />
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="header-content">
      <!-- Logo -->
      <a href="/" class="logo-link">
        <Image src={raiLogo} alt="Ddsgnr Logo" class="logo" />
      </a>

      <!-- Desktop Navigation -->
      <nav class="desktop-nav">
        <ul class="nav-list">
          {
            navLinks.map((link) => (
              <li>
                <a href={link.href}>{link.label}</a>
              </li>
            ))
          }
        </ul>
      </nav>

      <!-- Desktop CTA -->
      <div class="desktop-cta">
        <a href="/quote" class="btn-primary">Request A Quote</a>
      </div>

      <!-- Mobile Menu Button -->
      <button class="menu-toggle" aria-label="Toggle menu" id="menu-toggle">
        <Image src={hamburgerIcon} alt="Open menu" class="hamburger-icon" />
      </button>
    </div>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-menu" id="mobile-menu">
      <nav class="mobile-nav">
        <ul class="mobile-nav-list">
          {
            navLinks.map((link) => (
              <li>
                <a href={link.href}>{link.label}</a>
              </li>
            ))
          }
          <li>
            <a href="/quote" class="mobile-cta">Request A Quote</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

<script>
  const menuToggle = document.getElementById("menu-toggle");
  const mobileMenu = document.getElementById("mobile-menu");
  const header = document.querySelector(".header");

  if (menuToggle && mobileMenu) {
    menuToggle.addEventListener("click", () => {
      const isExpanded = menuToggle.getAttribute("aria-expanded") === "true";
      menuToggle.setAttribute("aria-expanded", isExpanded ? "false" : "true");
      mobileMenu.classList.toggle("is-active");
      menuToggle.classList.toggle("is-active");
      document.body.style.overflow = isExpanded ? "" : "hidden"; // Prevent scrolling when menu is open
    });
  }
</script>

<style>
  :root {
    --header-height: 72px;
    --primary-color: #000;
    --bg-color: #fff;
  }

  .header {
    background-color: var(--bg-color);
    position: sticky;
    top: 0;
    z-index: 1000;
    border-bottom: 1px solid #e0e0e0;
    font-family: system-ui, sans-serif;
  }

  .container {
    max-width: 2000px;
    margin: 0 auto;
    padding: 0 0.5rem;
  }

  .header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: var(--header-height);
  }

  .logo-link {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: var(--primary-color);
    gap: 0.5rem;
    z-index: 1001; /* Above mobile menu */
  }

  .logo {
    height: 32px;
    width: auto;
  }

  .logo-text {
    font-weight: 700;
    font-size: 1.25rem;
  }

  /* Desktop Nav */
  .desktop-nav {
    display: none;
  }

  .desktop-cta {
    display: none;
  }

  .nav-list {
    display: flex;
    gap: 2rem;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .nav-list a {
    text-decoration: none;
    color: var(--primary-color);
    font-weight: 500;
    font-size: 1rem;
    transition: opacity 0.2s;
  }

  .nav-list a:hover {
    opacity: 0.7;
  }

  .btn-primary {
    display: inline-block;
    padding: 0.5rem 1rem;
    background-color: #000;
    color: #fff;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 500;
    transition: opacity 0.2s;
  }

  .btn-primary:hover {
    opacity: 0.8;
  }

  /* Mobile Menu Toggle */
  .menu-toggle {
    display: block;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    z-index: 1001;
  }

  .hamburger-icon {
    width: 24px;
    height: 24px;
  }

  /* Mobile Menu Overlay */
  .mobile-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background-color: var(--bg-color);
    padding-top: var(--header-height);
    transform: translateX(100%);
    transition: transform 0.3s ease-in-out;
    z-index: 999;
  }

  .mobile-menu.is-active {
    transform: translateX(0);
  }

  .mobile-nav-list {
    list-style: none;
    padding: 2rem;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;
  }

  .mobile-nav-list a {
    text-decoration: none;
    color: var(--primary-color);
    font-size: 1.25rem;
    font-weight: 600;
  }

  .mobile-cta {
    display: inline-block;
    margin-top: 1rem;
    padding: 0.75rem 2rem;
    background-color: #000;
    color: #fff !important;
    border-radius: 4px;
  }

  /* Top Bar Styles */
  .top-bar-wrapper {
    display: none;
    border-bottom: 1px solid #000;
  }

  .top-bar {
    font-size: 0.75rem;
    color: #000;
    padding: 0.75rem 0;
  }

  .contact-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .emergency strong {
    font-weight: 700;
  }

  .divider {
    color: #ccc;
  }

  .social-icons {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .social-icon {
    width: 24px;
    height: auto;
    display: block;
  }

  /* Responsive Breakpoint */
  @media (min-width: 768px) {
    .top-bar-wrapper {
      display: block;
    }

    .container {
      padding: 0 5rem;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .menu-toggle {
      display: none;
    }

    .mobile-menu {
      display: none;
    }

    .desktop-nav {
      display: block;
      margin-left: auto;
    }

    .desktop-cta {
      display: block;
      margin-left: 2rem;
    }
  }
</style>
